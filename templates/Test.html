<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="{{ url_for('static', filename='AC_logo.jpeg') }}">
    <title>Test</title>

    <style>
        .body{
            background-color: rgb(225, 225, 225);
            margin: 0;
            padding: 0;
        }
        
        .logo{
            width: 80px;
            height: auto;
        }

        .box{
            width: 100%;
            background-color: black;
            padding: 10px;
            align-items: center;
            gap: 10px;
            display: flex;
            border: 2px;
            box-sizing: border-box;
        }

        .textbox{
            color: aliceblue;
            font-family:'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-weight: bold;
        }

        .search_bar{
            margin-left: 200px;
            padding: 10px;
            width: 500px;
            border: 1px solid #ccc;
            font-size: 16px;
            outline: none;
        }

        .next_button {
            display: inline-block;
            background-color: rgb(76, 76, 75);
            border: none;
            border-radius: 10px;
            height: 0.75cm;
            color: rgb(255, 255, 255);
            width: 3cm;
            text-align: center;
            margin-left: 15cm;
            cursor: pointer;
        }

        .next_button:hover {
            background-color: #aabdab;
        }

        h1{
            text-align: center;
            color: black;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        }

        form {
            max-width: 700px;
            margin: 20px auto;
            padding: 15px;
            text-align: center;
            background-color: rgb(170, 161, 148);
            border: 2px solid rgb(76, 76, 75);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            border-radius: 10px;
        }

        .choice {
            display: none; /* esconde o checkbox */
        }

        section {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin-bottom: 15px;
        }

        section label {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 15px;
            background-color: rgb(76, 76, 75);
            border-radius: 10px;
            cursor: pointer;
            width: 5cm;               
            transition: 0.2s;
            color: white;
            font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
            font-size: smaller;
            text-align: center;
            box-sizing: border-box;
        }

        .choice:checked + label {
            background-color: #aecaaf;
            color: black;
            transform: scale(1.03);
        }
    </style>
</head>

<body class="body"> 
    <div class="box">
        <img src="{{ url_for('static', filename='AC_logo.jpeg') }}" alt="Logo ARCADE CHECKPOINY" class="logo">
        <p class="textbox">ARCADE CHECKPOINT</p>
        <input type="search" class="search_bar" placeholder="What game are you looking for? &#128270">
    </div>

    <div>
        <h1>Tell us what kind of gamer are you...</h1>
        <section>
            <form id="gamerForm">
                <h3 class="textbox">What genres do you like?</h3>
                <section id="genres">
                    <input type="checkbox" id="Aventura" value="Aventura" class="choice">
                    <label for="Aventura">Aventura</label>

                    <input type="checkbox" id="Ação" value="Ação" class="choice">
                    <label for="Ação">Ação</label>

                    <input type="checkbox" id="Metroidvania" value="Metroidvania" class="choice">
                    <label for="Metroidvania">Metroidvania</label>

                    <input type="checkbox" id="Puzzle" value="Puzzle" class="choice">
                    <label for="Puzzle">Puzzle</label>

                    <input type="checkbox" id="Sandbox" value="Sandbox" class="choice">
                    <label for="Sandbox">Sandbox</label>

                    <input type="checkbox" id="RPG" value="RPG" class="choice">
                    <label for="RPG">RPG</label>

                    <input type="checkbox" id="Simulação" value="Simulação" class="choice">
                    <label for="Simulação">Simulação</label>

                    <input type="checkbox" id="Estratégia" value="Estratégia" class="choice">
                    <label for="Estratégia">Estratégia</label>

                    <input type="checkbox" id="Horror" value="Horror" class="choice">
                    <label for="Horror">Horror</label>

                    <input type="checkbox" id="Narrativo" value="Narrativo" class="choice">
                    <label for="Narrativo">Narrativo</label>
                </section>

                <h3 class="textbox">In what platforms do you usually play?</h3>
                <section id="platforms">
                    <input type="checkbox" id="Xbox" value="Xbox" class="choice">
                    <label for="Xbox">Xbox</label>

                    <input type="checkbox" id="PlayStation" value="PlayStation" class="choice">
                    <label for="PlayStation">PlayStation</label>

                    <input type="checkbox" id="PC" value="PC" class="choice">
                    <label for="PC">PC</label>

                    <input type="checkbox" id="NintendoSwitch" value="Nintendo Switch" class="choice">
                    <label for="NintendoSwitch">Nintendo Switch</label>

                    <input type="checkbox" id="Multiplataforma" value="Multiplataforma" class="choice">
                    <label for="Multiplataforma">Multiplataforma</label>

                    <input type="checkbox" id="Mobile" value="Mobile" class="choice">
                    <label for="Mobile">Mobile</label>
                </section>

                <h3 class="textbox">What game mode is your favorite?</h3>
                <section id="modes">
                    <input type="checkbox" id="SinglePlayer" value="Single-Player" class="choice">
                    <label for="SinglePlayer">Single-Player</label>

                    <input type="checkbox" id="MundoAberto" value="Mundo Aberto" class="choice">
                    <label for="MundoAberto">Mundo Aberto</label>

                    <input type="checkbox" id="MultiplayerOnline" value="Multiplayer online" class="choice">
                    <label for="MultiplayerOnline">Multiplayer online</label>

                    <input type="checkbox" id="Cooperativo" value="Cooperativo" class="choice">
                    <label for="Cooperativo">Cooperativo</label>
                </section>

                <button type="submit" class="next_button">Next</button>
            </form>
        </section>
    </div>

    <script>
        document.querySelector("#gamerForm").addEventListener("submit", async function (event) {
        event.preventDefault();

        const generos = [...document.querySelectorAll("#genres .choice:checked")].map(el => el.value);
        const plataformas = [...document.querySelectorAll("#platforms .choice:checked")].map(el => el.value);
        const modos = [...document.querySelectorAll("#modes .choice:checked")].map(el => el.value);

        const preferencias = { generos, plataformas, modos_jogo: modos };

        console.log("Enviando:", preferencias);

        const resposta = await fetch("/salvar_respostas", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify(preferencias)
        });

        const data = await resposta.json();

        if (data.redirect) {
            window.location.href = data.redirect; // redireciona para Home_page
        } else {
            console.error("Erro ao salvar:", data);
        }
    });

    </script>
</body>
</html>
